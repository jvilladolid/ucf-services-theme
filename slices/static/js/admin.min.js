Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var o=[],n=arguments[1],c=0;i>c;c++)if(c in t){var a=t[c];e.call(n,a,c,t)&&o.push(a)}return o});var WebcomAdmin={};WebcomAdmin.__init__=function(e){e('input[type="file"]').parents("form").attr("enctype","multipart/form-data"),e('input[type="file"]').parents("form").attr("encoding","multipart/form-data")},WebcomAdmin.utilityPageSections=function(e){var t=this;t.active=null,t.parent=e(".i-am-a-fancy-admin"),t.sections=e(".i-am-a-fancy-admin .fields .section"),t.buttons=e(".i-am-a-fancy-admin .sections .section a"),t.buttonWrap=e(".i-am-a-fancy-admin .sections"),t.sectionLinks=e('.i-am-a-fancy-admin .fields .section a[href^="#"]'),this.showSection=function(){var i=e(this),o=i.attr("href"),n=e(o);if(t.buttonWrap.find('.section a[href="'+o+'"]')&&n.is(t.sections)){t.buttons.removeClass("active"),i.addClass("active"),t.active.hide(),t.active=n,t.active.show(),history.pushState({},"",i.attr("href"));var c=t.parent.find('input[name="_wp_http_referer"]');return c.val(window.location),!1}},this.__init__=function(){t.active=t.sections.first(),t.sections.not(t.active).hide(),t.buttons.first().addClass("active"),t.buttons.click(this.showSection),t.sectionLinks.click(this.showSection),window.location.hash&&t.buttons.filter('[href="'+window.location.hash+'"]').click();var i=setInterval(function(){e(".updated").fadeOut(1e3),clearInterval(i)},2e3)},t.parent.length>0&&t.__init__()},WebcomAdmin.fileUploader=function(e){e(".meta-file-wrap").each(function(){var t,i=e(this),o=i.find(".meta-file-field"),n=i.find(".meta-file-upload"),c=i.find(".meta-file-delete"),a=i.find(".meta-file-preview");n.on("click",function(e){return e.preventDefault(),t?void t.open():(t=wp.media({title:"Select or Upload a File",button:{text:"Use this file"},multiple:!1}),t.on("select",function(){var e=t.state().get("selection").first().toJSON();a.html('<img src="'+e.iconOrThumb+'"><br>'+e.filename),o.val(e.id),n.addClass("hidden"),c.removeClass("hidden")}),void t.open())}),c.on("click",function(e){e.preventDefault(),a.html("No file selected."),n.removeClass("hidden"),c.addClass("hidden"),o.val("")})})},WebcomAdmin.iconModal=function(e){e(".meta-icon-toggle").on("click",function(t){var i=e(this).parent().parent().find(".meta-icon-field").attr("id"),o=e("#meta-icon-field-id"),n=e("#"+i).val();if(i&&o&&(o.val(i),n)){var c=e('i[data-icon-value="'+n+'"]').parent();c.addClass("selected"),setTimeout(function(){e("#TB_ajaxContent").animate({scrollTop:c.position().top-48},100)},750)}}),e(".meta-fa-icon").on("click",function(t){e(".meta-fa-icon").removeClass("selected"),e(this).addClass("selected")}),e("#meta-icon-search").on("keyup",function(){var t=e(this).val();""===t?e(".meta-fa-icon").show():(e(".meta-fa-icon").hide(),e('i[class*="'+t+'"]').parent().show())}),e("#meta-icon-submit").on("click",function(){var t=e(".meta-fa-icon.selected").find("i").attr("data-icon-value"),i=e("#meta-icon-field-id"),o=e("#"+i.val().replace("[","\\[").replace("]","\\]")),n=o.parent().find("i");t&&(o.val(t),n.length?n.attr("class","fa "+t+" fa-preview"):($icon=e('<i class="fa '+t+' fa-preview"></i>'),o.parent().prepend($icon))),tb_remove()})},WebcomAdmin.menuField=function(e){var t=e(".meta-menu-field");if(t.length){var i=WebcomLocal.menuApi,o=function(){e.getJSON(i+"/menus",function(e){for(var i in e){var o=e[i];0===t.find("option[value="+o.ID+"]").length&&t.append('<option value="'+o.ID+'">'+o.name+"</option>")}})},n=function(t){var i=e(this),o=i.find("option:selected").val(),n=i.parent().find("a.edit-menu");o?n.attr("href",WebcomLocal.menuAdmin+"?action=edit&menu="+o):n.hide()};WebcomLocal.menuApi&&setInterval(o,5e3),t.on("change",n)}},WebcomAdmin.shortcodeInterfaceTool=function(e){var t=WebcomAdmin.shortcodeInterfaceTool;t.shortcodeForm=e("#select-shortcode-form"),t.shortcodeButton=t.shortcodeForm.find("button"),t.shortcodeSelect=t.shortcodeForm.find("#shortcode-select"),t.shortcodeEditors=t.shortcodeForm.find("#shortcode-editors"),t.shortcodeDescriptions=t.shortcodeForm.find("#shortcode-descriptions"),t.shortcodeInsert=function(e,t,i){var o="["+e;if(t)for(var n in t)o+=" "+n+'="'+t[n]+'"';o+="]",i&&(o+=i),o+="[/"+e+"]",send_to_editor(o)},t.shortcodeAction=function(){var i=t.shortcodeSelect.find(":selected");if(!(i.length<1||""===i.val())){var o=t.shortcodeEditors.find("li.shortcode-"+t.shortcodeSelected),n=i.attr("data-enclosing")||null,c=tinymce.activeEditor?tinymce.activeEditor.selection.getContent():null,a=null;a=n&&c?c:n;var r={};1===o.length&&o.children().each(function(){var t=e(this);switch(t.prop("tagName")){case"INPUT":case"TEXTAREA":case"SELECT":"checkbox"===t.prop("type")?r[t.attr("data-parameter")]=String(t.prop("checked")):r[t.attr("data-parameter")]=t.val()}}),t.shortcodeInsert(i.val(),r,a)}},t.shortcodeSelectAction=function(){t.shortcodeSelected=t.shortcodeSelect.val(),t.shortcodeEditors.find("li").hide(),t.shortcodeDescriptions.find("li").hide(),t.shortcodeEditors.find(".shortcode-"+t.shortcodeSelected).show(),t.shortcodeDescriptions.find(".shortcode-"+t.shortcodeSelected).show()},t.shortcodeSelectAction(),t.shortcodeSelect.change(t.shortcodeSelectAction),t.shortcodeButton.click(t.shortcodeAction)},function(e){WebcomAdmin.__init__(e),WebcomAdmin.utilityPageSections(e),WebcomAdmin.fileUploader(e),WebcomAdmin.iconModal(e),WebcomAdmin.menuField(e),WebcomAdmin.shortcodeInterfaceTool(e)}(jQuery);